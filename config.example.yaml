# --- Shared defaults ---
defaults:
  ssh_key_path: /home/gfetch/.ssh/id_rsa
  poll_interval: 10m
  local_path: /var/repos
  branches:
    - main
  tags:
    - /^v[0-9]+\./
  openvox: false
  prune: true                   # prune obsolete refs (branches/tags no longer matching any pattern) in daemon mode
  prune_stale: true             # prune branches matching patterns but with no commits in 6 months
  stale_age: 180d               # custom threshold for staleness (d=days, mo=months, y=years)

repos:
  # Private repo via SSH
  my-service:
    url: git@github.com:obmondo/my-service.git
    # Inherits all fields from defaults
    branches:
      - main
      - /^release-.*/

  # Public repo via HTTPS (overrides some defaults)
  git-mirror:
    url: https://github.com/git/git.git
    local_path: /var/repos/mirror
    prune: false                # override for this repo (no obsolete-ref pruning)
    prune_stale: false          # override for this repo
    branches:
      - main
    tags:
      - /^v[0-9]+\./

# --- Directory mode ---
# Instead of a single file, --config can point to a directory:
#
#   config.d/
#   ├── global.yaml            # shared defaults (uses the same fields as the 'defaults:' key)
#   ├── repo-a/
#   │   └── config.yaml        # repos: { repo-a: { url: ..., branches: [...] } }
#   └── repo-b/
#       └── config.yaml
#
# Per-repo values override globals. Use `gfetch cat` to see the resolved config.
